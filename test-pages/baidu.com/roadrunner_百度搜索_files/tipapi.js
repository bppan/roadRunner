define(["ecom/common/api/tip06211930/tip"],function(t){var e={a:""+"<span#{billing}>"+'<a target="_blank"  href="#{url}" onmousedown="return c({'+"'title':this.innerHTML,"+"'url':this.href"+",#{options}"+'});">'+"#{text}"+"</a>"+"</span>",title:'<strong class="ecl-ui-tip-ps-title">#{title}</strong>',rightTop:""+'<div class="ecl-ui-tip-ps-right ecl-ui-tip-ps-right-top">'+"#{favorite}"+"#{and}"+"#{appraise}"+"</div>",telephone:'<div class="ecl-ui-tip-ps-telephone">#{text}</div>',coupon:'<div class="ecl-ui-tip-ps-coupon">#{text}#{a}</div>',list:"<ul>#{medical}#{airline}#{dfa}#{identity}</ul>",medical:'<li class="icon-medical"><span>#{text}</span></li>',identity:""+'<li class="icon-identity">已经通过'+"#{text}#{a}"+"</li>"+"#{creditblock}",creditblock:""+'<li class="icon-empty">'+'<div class="ecl-ui-tip-ps-level '+'ecl-ui-tip-ps-level#{credit}">百度信誉星级</div>'+"</li>",airline:""+'<li class="icon-empty">'+'<img alt="行业认证" title="行业认证" height=16 '+'width=16 src="#{img}">具有'+"#{a}的#{text}</li>",dfa:""+'<li class="icon-empty">'+'<img alt="商家权益保障" '+'title="商家权益保障" height=16 width=16 '+'src="#{img}">'+"#{text}"+"</li>",rightBottom:""+'<div class="ecl-ui-tip-ps-right ecl-ui-tip-ps-right-bottom">'+"#{report}"+"</div>"};var i={triggers:"ec-ui-tip",leftLimiteDomId:"ec_im_container",arrow:true,layerOffsetLeft:10,layerOffsetTop:5,hideDelay:500};var r={logtag:"vshenfenhover",logUrl:"http://fclick.baidu.com/w.gif?"};var a=function(){var t=[];var e=function(t){return encodeURIComponent(t)};return function(i){var a=t.push(new Image)-1;t[a].onload=t[a].onerror=function(){t[a]=t[a].onload=t[a].onerror=null;delete t[a]};var n=r.logUrl+baidu.url.jsonToQuery(i,e);t[a].src=n}}();function n(t,e){var r=parseInt(e.main.style.left,10);var a=parseInt(e.elements.arrow.style.left,10);var n=baidu.g(i.leftLimiteDomId);var l=n?parseInt(baidu.dom.getPosition(n).left,10):r;e.main.style.left=l+"px";e.elements.arrow.style.left=r+a-l+"px"}function l(t,e){var r=parseInt(e.main.style.left,10);var a=i.layerOffsetLeft||0;e.main.style.left=r-a+"px";e.elements.arrow.style.left=a+"px"}function o(t,e){var i=t.target.getAttribute("data-tooltips");if("bc"===i){n(t,e)}if("bl"===i){l(t,e)}var o={tag:r.logtag,qid:bds.comm.qid,timestamp:+new Date};a(o)}function s(t,e){var i={};var r="";if(t){var a=[];for(var n in t){if("billing"===n||"url"===n||"text"===n){continue}a.push(""+"'"+n+"'"+":"+"'"+t[n]+"'")}i={billing:t.billing&&' class="EC_PP"',url:t.url,text:t.text||e,options:a.join(",")};r=c("a",i)}return r}function c(t,i){i=i||{};return baidu.format(e[t],i)}function u(t,e){var i="";if(e){var r=s(e.a,"百度身份认证");var a=c("creditblock",{credit:e.credit});i=c(t,{text:e.text,a:r,creditblock:a,img:e.img})}return i}function d(t){var e=c("title",{title:t.title});var i=s(t.favorite,"收藏");var r=s(t.appraise,"评论");var a=c("rightTop",{favorite:i,appraise:r,and:i&&r&&"&nbsp|&nbsp"});var n=""+e+a;return n}function p(t){var e=u("medical",t.medical);var i=u("identity",t.identity);var r=u("airline",t.airline);var a=u("dfa",t.dfa);var n=c("list",{medical:e,identity:i,airline:r,dfa:a});var l=s(t.report,"举报");var o=c("rightBottom",{report:l});var d=""+n+o;return d}function f(t){var e=c("title",{title:t.title});return e}function v(t){var e=c("telephone",{text:t.text});return e}function m(t){var e=c("title",{title:t.title});return e}function g(t){var e=s(t.a,"优惠券链接");var i=c("coupon",{a:e,text:t.text});return i}function h(t,e){var i=t.getAttribute(e);return i&&baidu.json.parse(i)}function b(t,e){var i="";var r="";var a=t.target;baidu.dom.addClass(e.main,"ecl-ui-tip-ps");baidu.dom["true"===t.target.getAttribute("data-tip-limite")?"addClass":"removeClass"](e.main,"ecl-ui-tip-ps-limite-width");var n=h(a,"data-renzheng");var l=h(a,"data-telephone");var o=h(a,"data-coupon");if(n){i=d(n);r=p(n)}if(l){i=f(l);r=v(l)}if(o){i=m(o);r=g(o)}e.title=i;e.content=r}function y(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet");e.setAttribute("type","text/css");e.setAttribute("href",t);var i=document.getElementsByTagName("head")[0]||document.body;i.appendChild(e);i=null;e=null}function x(e){var r="http://s1.bdstatic.com/r/www/cache/biz/ecom/common/api/tip06211930/tip.css";y(r);baidu.object.extend(i,e||{});new t({mode:"over",triggers:i.triggers,arrow:i.arrow,hideDelay:i.hideDelay,offset:{x:i.layerOffsetLeft,y:i.layerOffsetTop},onShow:function(t){o(t,this)},onBeforeShow:function(t){b(t,this)}}).render()}return{init:x}});